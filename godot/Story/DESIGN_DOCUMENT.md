# Design Document: "Агент в Обояни"

## Концепция игры
Симулятор жизни польского шпиона Данилы в российском городе Обоянь. Игрок должен балансировать между выполнением заданий разведки и поддержанием своего прикрытия.

## Главный герой
**Данила Ковальский** - польский агент под прикрытием
- Легенда: польский бизнесмен
- Цель: собирать разведданные о местном заводе
- Срок миссии: 6 месяцев

## Основные механики

### 1. Система скрытности (Stealth System)
```
stealth_level (0-100)
- 0-20: Критический - сильный акцент, все подозревают
- 21-40: Низкий - заметный акцент, частые ошибки
- 41-60: Средний - легкий акцент, иногда промахи
- 61-80: Хороший - почти незаметен
- 81-100: Отличный - идеальная маскировка
```

**Как повышается:**
- Изучение русской культуры (+5)
- Успешное общение с местными (+3)
- Прохождение без подозрений (+10)
- Правильные ответы на вопросы (+2)

**Как понижается:**
- Культурные ошибки (-10)
- Подозрительное поведение (-5)
- Провал мини-игр (-15)
- Неправильные ответы майору (-20)

### 2. Система месяцев
Игра делится на 6 месяцев (февраль - июль)

**Структура каждого месяца:**
```
1. Получение задания от центра
2. Свободные действия (2-3 дня)
   - Общение с местными
   - Изучение культуры
   - Подготовка к заданию
3. Выполнение основного задания (мини-игра)
4. Допрос у майора (проверка скрытности)
5. Отчет центру
6. Переход к следующему месяцу
```

### 3. Допросы майором Волковым
Каждый месяц майор вызывает на допрос.

**Уровень подозрений майора зависит от:**
- stealth_level игрока
- Результатов прошлых заданий
- Поведения в городе

**Типы вопросов:**
- О биографии (нужна хорошая память)
- О русской культуре (нужны знания)
- О целях пребывания (нужна убедительность)
- Неожиданные вопросы (проверка реакции)

### 4. Система заданий

#### Месяц 1 (Февраль): Адаптация
- **Задание:** Сфотографировать схему завода издалека
- **Мини-игра:** Фотография (выбор правильного угла)
- **Сложность:** Легко

#### Месяц 2 (Март): Установление контактов
- **Задание:** Подружиться с работником завода
- **Мини-игра:** Диалоги в баре (выбор правильных ответов)
- **Сложность:** Средне

#### Месяц 3 (Апрель): Первое проникновение
- **Задание:** Проникнуть на территорию завода
- **Мини-игра:** Стелс (избегать охраны)
- **Сложность:** Средне

#### Месяц 4 (Май): Кража документов
- **Задание:** Украсть секретные документы
- **Мини-игра:** Взлом сейфа (мини-пазл)
- **Сложность:** Сложно

#### Месяц 5 (Июнь): Установка жучка
- **Задание:** Установить прослушку в офисе директора
- **Мини-игра:** Скрытность + время
- **Сложность:** Очень сложно

#### Месяц 6 (Июль): Финальная операция
- **Задание:** Получить главные чертежи
- **Мини-игра:** Комбинированная (все навыки)
- **Сложность:** Экстремально

### 5. Мини-игры

#### Мини-игра 1: Фотография
Выбрать правильное время и угол для фото завода

#### Мини-игра 2: Диалоги
Выбрать правильные ответы, чтобы не вызвать подозрений

#### Мини-игра 3: Стелс
Избегать охрану, двигаясь по территории

#### Мини-игра 4: Взлом
Решить головоломку для открытия сейфа

#### Мини-игра 5: Установка жучка
Быстро установить устройство, не попавшись

#### Мини-игра 6: Финальная
Комбинация всех предыдущих навыков

### 6. Система персонажей

#### Майор Волков (Антагонист)
- Подозрительность (0-100)
- Каждый месяц допрос
- Если подозрительность > 80 - игра окончена

#### Дима (Друг/Источник)
- Дружба (0-100)
- Может помочь с информацией
- Может предать, если заподозрит

#### Анна (Романтический интерес)
- Отношения (0-100)
- Может помочь с прикрытием
- Может стать угрозой

### 7. Концовки

#### Отличная концовка (stealth > 80, все задания)
Миссия выполнена идеально, награда, повышение

#### Хорошая концовка (stealth > 60, 5+ заданий)
Миссия выполнена, но есть подозрения

#### Средняя концовка (stealth > 40, 4+ задания)
Частичный успех, нужно эвакуироваться

#### Плохая концовка (stealth < 40)
Раскрыт, арест

#### Секретная концовка
Остаться в России с Анной (особые условия)

## Техническая реализация

### Переменные отслеживания:
```gdscript
var stealth_level = 50  # Уровень скрытности
var suspicion_volkov = 20  # Подозрения майора
var friendship_dima = 0  # Дружба с Димой
var relationship_anna = 0  # Отношения с Анной
var current_month = 1  # Текущий месяц (1-6)
var completed_missions = 0  # Завершенные задания
var mission_quality = []  # Качество выполнения заданий
var cultural_knowledge = 0  # Знание культуры
```

### Структура файлов:
```
Story/
├── main_loop.txt          # Главный цикл игры
├── months/
│   ├── month1_february.txt
│   ├── month2_march.txt
│   ├── month3_april.txt
│   ├── month4_may.txt
│   ├── month5_june.txt
│   └── month6_july.txt
├── interrogations/
│   ├── interrogation_template.txt
│   ├── interrogation_month1.txt
│   ├── interrogation_month2.txt
│   └── ...
├── minigames/
│   ├── photo_mission.txt
│   ├── bar_dialogue.txt
│   ├── stealth_infiltration.txt
│   ├── safe_cracking.txt
│   ├── bug_placement.txt
│   └── final_mission.txt
└── endings/
    ├── ending_perfect.txt
    ├── ending_good.txt
    ├── ending_neutral.txt
    ├── ending_bad.txt
    └── ending_secret.txt
```

## Баланс игры

### Рекомендуемый прогресс:
- Месяц 1: stealth 50 → 55
- Месяц 2: stealth 55 → 62
- Месяц 3: stealth 62 → 70
- Месяц 4: stealth 70 → 75
- Месяц 5: stealth 75 → 80
- Месяц 6: stealth 80 → 85+

### Критические точки:
- Если stealth < 30 в месяце 3 → плохая концовка неизбежна
- Если suspicion_volkov > 80 → немедленный арест
- Если провалено 2+ задания → средняя концовка максимум












